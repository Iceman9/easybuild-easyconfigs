name = 'Embree'
easyblock = 'CMakeMake'
version = '3.13.2'

homepage = 'https://embree.github.io'
description = """High Performance Ray Tracing Kernels"""


source_urls = ['https://github.com/embree/embree/archive/refs/tags']
sources = ['v%(version)s.tar.gz']
checksums = ['dcda827e5b7a606c29d00c1339f1ef00f7fa6867346bc46a2318e8f0a601c6f9']


toolchain = {
    'name': 'foss',
    'version': '2022b'
}

toolchainopts = {'pic': True}


dependencies = [
    ('ispc', '1.15.0', '', SYSTEM),
    ('tbb', '2020.3'),
]
builddependencies = [('CMake', '3.24.3')]

configopts =' -DEMBREE_ISPC_SUPPORT=ON'
configopts+=' -DEMBREE_TUTORIALS=OFF'
configopts+=' -DCMAKE_INSTALL_LIBDIR=lib'


sanity_check_paths = {
    'files': ['include/embree3/rtcore.h', 'include/embree3/rtcore_common.h',
              'lib64/libembree3.%s' % SHLIB_EXT],
    'dirs': ['include/embree3', 'lib64/cmake', 'share/man/man3'],
}

moduleclass = 'vis'